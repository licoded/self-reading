“框架设计里到处都体现了权衡的艺术”

在深入讨论Vue.js3各个模块的实现思路和细节之前，很有比较了解视图层框架设计方面的内容，搞清楚Vue.js3的定位。因为当我们在设计一个框架的时候，框架本身的各个模块之间并不是相互独立的，而是相互关联、相互制约的。

## 1.1 命令式和声明式

从范式上来讲，视图层框架通常分为命令式和声明式，它们各有优缺点。首先，介绍命令式框架和声明式框架的概念。

### 命令式

早年间流行的jQuery就是典型的命令式框架。命令式框架的一大特点就是**关注过程**。例如，我们把下面这段话翻译成对应的代码：

```
获取 id 为 app 的 div 标签
它的文本内容为 hello world
为其绑定点击事件
当点击时弹出提示：ok
```

对应的jQuery代码示例为：

```js
$('#app') // 获取 div
  .text('hello world') // 设置文本内容
  .on('click', () => { alert('ok') }) // 绑定点击事件
```

考虑到有些读者可能没有用过jQuery，因此也给出用原生JavaScript的版本

```js
const div = document.querySelector('#app') // 获取 div
div.innerText = 'hello world' // 设置文本内容
div.addEventListener('click', () => { alert('ok') }) // 绑定点击事件
```

不难看出，自然语言描述能够与代码产生一一对应的关系，代码本身描述的是“做事的过程”，这符合我们的逻辑直觉

### 声明式

与命令式框架更加关注过程不同，声明式框架更加**关注结果**。下面是对应的Vue.js代码示例：

```js
<div @click="() => alert('ok')">hello world</div>
```

可以看出，我们提供的是一个“结果”，至于如何实现这个“结果”，则是由Vue.js帮我们实现的，我们并不关心。Vue.js帮我们封装了**过程**，所以Vue.js的内部实现还是**命令式**的，而暴露给用户的却更加**声明式**。

## 1.2 性能和可维护性的权衡

命令式和声明式各有优缺点，在框架设计方面，则体现在性能与可维护性之间的权衡。这里我们先抛出一个结论：声明式的代码不优于命令式代码的性能。
